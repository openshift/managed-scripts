file: script.sh
name: describe-nodes
description: Provide the full functionality of `oc describe nodes`, as the standard `oc describe nodes` in backplane restricts access to customer workload information.
author: dsquirre
allowedGroups: 
  - SREP
  - CEE
  - CSSRE
  - MTSRE
rbac:
    roles:
      - namespace: "openshift-machine-api"
        rules:
          - verbs:
            - "get"
            - "list"
            - "watch"
            - "create"
            - "delete"
            apiGroups:
            - "machine.openshift.io"
            resources:
            - "machines"
      - namespace: "openshift-etcd"
        rules:
          - verbs:
            - "get"
            - "list"
            - "watch"
            - "create"
            apiGroups:
            - ""
            resources:
            - "pods"
          - verbs:
            - "create"
            apiGroups:
            - ""
            resources:
            - "pods/exec"
          - verbs:
            - "get"
            - "list"
            - "delete"
            apiGroups:
            - ""
            resources:
            - "secrets"
    clusterRoleRules:
        - verbs:
            - "get"
            - "list"
            - "watch"
          apiGroups:
            - "upgrade.managed.openshift.io"
          resources:
            - "upgradeconfigs"
        - verbs:
            - "get"
            - "list"
            - "watch"
          apiGroups:
            - ""
          resources:
            - "nodes"
        - verbs:
            - "get"
            - "list"
            - "watch"
            - "patch"
          apiGroups:
            - "operator.openshift.io"
          resources:
            - "etcds"
        - verbs:
            - "get"
          apiGroups:
            - "config.openshift.io"
          resources:
            - "clusteroperators"
            - "clusterversions"
envs:
  - key: "SCRIPT_PARAMETERS"
    description: "Parameters to be passed to the script. You can set the variable to '--help' to get list of supported parameters"
    optional: true
language: bash